<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;"><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­æ–‡åå­—å·¥åŠ - Chinese NameCraft</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'chinese': ['SimSun', 'STSong', 'serif'],
                        'kai': ['KaiTi', 'STKaiti', 'serif'],
                        'handwriting': ['Dancing Script', 'Brush Script MT', 'Lucida Handwriting', 'cursive']
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap');
        
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: #ffffff;
            min-height: 100vh;
        }
        
        .dark body {
            background: #0f0f0f;
        }
        
        .glass-morphism {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .dark .glass-morphism {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .rice-grid {
            position: relative;
            width: 130px;
            height: 130px;
            border: 3px solid #ff6b6b;
            background: white;
            margin: 0 10px;
            display: inline-block;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.15);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .rice-grid:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 35px rgba(255, 107, 107, 0.25);
            border-color: #ff5252;
        }
        
        .rice-grid::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            width: 1px;
            height: 100%;
            background: #e53e3e;
            opacity: 0.5;
        }
        
        .rice-grid::after {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            width: 100%;
            height: 1px;
            background: #e53e3e;
            opacity: 0.5;
        }
        
        .rice-grid .diagonal1 {
            position: absolute;
            top: 0;
            left: 0;
            width: 141.42%;
            height: 1px;
            background: #e53e3e;
            opacity: 0.3;
            transform-origin: 0 0;
            transform: rotate(45deg);
        }
        
        .rice-grid .diagonal2 {
            position: absolute;
            top: 0;
            right: 0;
            width: 141.42%;
            height: 1px;
            background: #e53e3e;
            opacity: 0.3;
            transform-origin: 100% 0;
            transform: rotate(-45deg);
        }
        
        .rice-grid .character {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 64px;
            font-weight: bold;
            color: #000;
            font-family: 'KaiTi', 'STKaiti', serif;
            line-height: 1;
        }
        
        .dark .rice-grid {
            background: #1f2937;
        }
        
        .dark .rice-grid .character {
            color: #000;
        }
        
        .pinyin-text {
            font-size: 16px;
            color: #e53e3e;
            font-weight: 600;
            margin-bottom: 8px;
            text-align: center;
        }
        
        .meaning-text {
            font-size: 14px;
            color: #4b5563;
            text-align: center;
            margin-top: 8px;
            max-width: 120px;
            line-height: 1.4;
        }
        
        .dark .meaning-text {
            color: #9ca3af;
        }

        .name-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08), 0 10px 20px rgba(0, 0, 0, 0.05);
            padding: 40px;
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            border: 1px solid rgba(139, 92, 246, 0.1);
            position: relative;
            overflow: hidden;
        }

        .name-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #8b5cf6, #3b82f6, #06b6d4);
        }

        .dark .name-card {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            border-color: rgba(139, 92, 246, 0.2);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4), 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .handwriting-quote {
            font-family: 'Great Vibes', 'Dancing Script', cursive;
            font-size: 18px;
            line-height: 1.8;
            color: #4a5568;
            position: relative;
            padding: 30px 35px;
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border-radius: 16px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06);
            border-left: 4px solid #8b5cf6;
            margin: 20px 0;
            word-wrap: break-word;
            max-width: 100%;
            overflow-wrap: break-word;
        }

        .dark .handwriting-quote {
            color: #a0aec0;
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .handwriting-quote::before {
            content: '"';
            font-size: 50px;
            color: #8b5cf6;
            position: absolute;
            left: 10px;
            top: -8px;
            font-family: 'Times New Roman', serif;
            opacity: 0.3;
        }

        .handwriting-quote::after {
            content: '"';
            font-size: 50px;
            color: #8b5cf6;
            position: absolute;
            right: 10px;
            bottom: -35px;
            font-family: 'Times New Roman', serif;
            opacity: 0.3;
        }

        .individual-pinyin {
            font-size: 14px;
            color: #ff6b6b;
            font-weight: 600;
            margin-bottom: 6px;
            text-align: center;
            min-height: 20px;
        }
        
        .modern-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 12px;
            padding: 12px 24px;
            color: white;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .modern-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
        }
        
        .option-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 2px solid transparent;
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .option-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #667eea, #764ba2);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }
        
        .option-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.15);
        }
        
        .option-card:hover::before {
            opacity: 0.05;
        }
        
        .option-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #f0f4ff 0%, #e0e7ff 100%);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.2);
        }
        
        .dark .option-card {
            background: linear-gradient(135deg, #374151 0%, #1f2937 100%);
        }
        
        .dark .option-card.selected {
            background: linear-gradient(135deg, #4c1d95 0%, #3730a3 100%);
        }

        .nav-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.2s;
            text-decoration: none;
            border: none;
            cursor: pointer;
        }

        .nav-btn-back {
            background: #f3f4f6;
            color: #374151;
        }

        .nav-btn-back:hover {
            background: #e5e7eb;
            transform: translateX(-2px);
        }

        .nav-btn-next {
            background: #3b82f6;
            color: white;
        }

        .nav-btn-next:hover {
            background: #2563eb;
            transform: translateX(2px);
        }

        .dark .nav-btn-back {
            background: #374151;
            color: #d1d5db;
        }

        .dark .nav-btn-back:hover {
            background: #4b5563;
        }

        .similarity-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .similarity-high {
            background: #10b981;
        }

        .similarity-medium {
            background: #f59e0b;
        }

        .similarity-low {
            background: #6b7280;
        }

        .phonetic-match {
            background: #8b5cf6;
        }

        .popular-name {
            background: #06b6d4;
        }

        .landscape-layout {
            display: flex;
            gap: 30px;
            align-items: flex-start;
            max-width: 100%;
        }

        .rice-section {
            flex: 0 0 auto;
            max-width: 500px;
        }

        .meaning-section {
            flex: 1;
            min-width: 0;
            max-width: 600px;
        }

        .decorative-pattern {
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(139, 92, 246, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(59, 130, 246, 0.05) 0%, transparent 50%);
        }

        .two-column-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .column-header {
            text-center;
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .phonetic-column .column-header {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
            color: white;
        }

        .popular-column .column-header {
            background: linear-gradient(135deg, #06b6d4, #0891b2);
            color: white;
        }

        @media (max-width: 1024px) {
            .landscape-layout {
                flex-direction: column;
                gap: 20px;
                align-items: center;
            }
            
            .rice-section, .meaning-section {
                max-width: 100%;
            }
            
            .name-card {
                padding: 30px;
            }

            .two-column-layout {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }

        @media (max-width: 768px) {
            .name-card {
                padding: 24px;
                margin: 0 16px;
            }
            
            .handwriting-quote {
                font-size: 16px;
                padding: 20px 25px;
            }
        }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 min-h-screen transition-colors duration-300">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-800 dark:text-gray-100 mb-4">
                ä¸­æ–‡åå­—å·¥åŠ
            </h1>
            <p class="text-lg text-gray-600 dark:text-gray-400">
                Chinese NameCraft ---- Crafting Authentic Chinese Names for Global Friends
            </p>
        </div>

        <!-- Progress Bar -->
        <div class="mb-12">
            <div class="flex items-center justify-center space-x-4 mb-4">
                <div class="step-indicator flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors" id="step1-indicator">
                    <span class="text-sm font-bold">1</span>
                </div>
                <div class="w-16 h-1 bg-gray-300 dark:bg-gray-600 rounded"></div>
                <div class="step-indicator flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors" id="step2-indicator">
                    <span class="text-sm font-bold">2</span>
                </div>
                <div class="w-16 h-1 bg-gray-300 dark:bg-gray-600 rounded"></div>
                <div class="step-indicator flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors" id="step3-indicator">
                    <span class="text-sm font-bold">3</span>
                </div>
            </div>
            <div class="text-center text-sm text-gray-600 dark:text-gray-400" id="step-description">
                Step 1: Enter your surname
            </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="flex justify-between mb-8">
            <button id="prev-btn" onclick="goToPreviousStep()" class="nav-btn nav-btn-back hidden">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="m15 18-6-6 6-6"></path>
                </svg>
                ä¸Šä¸€æ­¥ / Previous
            </button>
            <div></div>
            <button id="next-btn" onclick="goToNextStep()" class="nav-btn nav-btn-next hidden">
                ä¸‹ä¸€æ­¥ / Next
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="m9 18 6-6-6-6"></path>
                </svg>
            </button>
        </div>

        <!-- Step 1: Surname Input -->
        <div id="step1" class="step-content">
            <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-8 mb-8">
                <h2 class="text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-6 text-center">
                    ç¬¬ä¸€æ­¥ï¼šè¾“å…¥æ‚¨çš„å§“æ° / Step 1: Enter Your Surname
                </h2>
                <div class="max-w-md mx-auto">
                    <input type="text" id="surname-input" class="w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="Enter your surname (e.g., Smith, Johnson, GarcÃ­a, MÃ¼ller, Yamamoto)" autocomplete="off">
                    <button onclick="generateSurnameSuggestions()" class="w-full mt-4 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200">
                        ç”Ÿæˆå§“æ°å»ºè®® / Generate Surname Suggestions
                    </button>
                </div>
            </div>

            <!-- Surname Suggestions -->
            <div id="surname-suggestions" class="hidden">
                <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4 text-center">
                    é€‰æ‹©ä¸€ä¸ªä¸­æ–‡å§“æ° / Choose a Chinese Surname
                </h3>
                <div class="text-center mb-4">
                    <p class="text-sm text-gray-600 dark:text-gray-400">
                        ğŸŸ¢ é«˜åŒ¹é…åº¦ / High Match &nbsp;&nbsp; ğŸŸ  ä¸­ç­‰åŒ¹é…åº¦ / Medium Match &nbsp;&nbsp; âšª å…¶ä»–é€‰é¡¹ / Other Options
                    </p>
                </div>
                <div id="surname-options" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-4xl mx-auto">
                    <!-- Surname options will be populated here -->
                </div>
                <div class="text-center mt-6">
                    <button onclick="generateMoreSurnameSuggestions()" id="more-surname-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-6 rounded-lg transition-colors duration-200">
                        æ›´å¤šé€‰é¡¹ / More Options
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 2: First Name Input -->
        <div id="step2" class="step-content hidden">
            <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-8 mb-8">
                <h2 class="text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-6 text-center">
                    ç¬¬äºŒæ­¥ï¼šè¾“å…¥æ‚¨çš„åå­— / Step 2: Enter Your First Name
                </h2>
                
                <!-- ä¼˜åŒ–åçš„æç¤ºå¡ç‰‡ -->
                <div class="bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg p-4 mb-6">
                    <div class="flex items-start space-x-3 text-gray-500 dark:text-gray-400">
                        <svg class="w-5 h-5 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        <div class="text-sm leading-relaxed">
                            <div class="mb-1">ğŸ’¡ æç¤ºï¼šæ‚¨å¯ä»¥å‚è€ƒä¸‹æ–¹å»ºè®®ï¼Œç„¶åä½¿ç”¨"æ‰‹åŠ¨è¾“å…¥"åˆ›å»ºä¸ªæ€§åŒ–åå­—</div>
                            <div>Tip: You can draw inspiration from the suggestions below and use "Manual Input" to create a personalized name</div>
                        </div>
                    </div>
                </div>
                
                <div class="max-w-md mx-auto space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            åå­— / First Name
                        </label>
                        <input type="text" id="firstname-input" class="w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="Enter your first name (e.g., John, Mary, Alexander, Elizabeth)" autocomplete="off">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            æ€§åˆ« / Gender
                        </label>
                        <select id="gender-input" class="w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="">é€‰æ‹©æ€§åˆ« / Choose Gender</option>
                            <option value="male">ç”·æ€§ / Male</option>
                            <option value="female">å¥³æ€§ / Female</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            åå­—å«ä¹‰ / Name Meaning (Optional)
                        </label>
                        <input type="text" id="meaning-input" class="w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="What does your name mean? (e.g., brave, wisdom)" autocomplete="off">
                    </div>
                    <button onclick="generateNameSuggestions()" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200">
                        ç”Ÿæˆåå­—å»ºè®® / Generate Name Suggestions
                    </button>
                </div>
            </div>

            <!-- Name Suggestions -->
            <div id="name-suggestions" class="hidden">
                <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-6 text-center">
                    é€‰æ‹©ä¸€ä¸ªä¸­æ–‡åå­— / Choose a Chinese Given Name
                </h3>

                <!-- åŒåˆ—å¸ƒå±€ -->
                <div class="two-column-layout">
                    <!-- å·¦åˆ—ï¼šéŸ³éŸµåŒ¹é… -->
                    <div class="phonetic-column">
                        <div class="column-header">
                            ğŸµ éŸ³éŸµåŒ¹é… / Phonetic Match
                        </div>
                        <div id="phonetic-options" class="space-y-3">
                            <!-- éŸ³éŸµåŒ¹é…é€‰é¡¹ -->
                        </div>
                    </div>
                    
                    <!-- å³åˆ—ï¼šå¸¸ç”¨åå­— -->
                    <div class="popular-column">
                        <div class="column-header">
                            â­ å¸¸ç”¨åå­— / Popular Names
                        </div>
                        <div id="popular-options" class="space-y-3">
                            <!-- å¸¸ç”¨åå­—é€‰é¡¹ -->
                        </div>
                    </div>
                </div>

                <div class="text-center mt-6">
                    <button onclick="generateMoreNameSuggestions()" id="more-name-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-6 rounded-lg transition-colors duration-200 mr-4">
                        æ›´å¤šé€‰é¡¹ / More Options
                    </button>
                    <button onclick="showManualInput()" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg transition-colors duration-200">
                        æ‰‹åŠ¨è¾“å…¥ / Manual Input
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 3: Final Name Display -->
        <div id="step3" class="step-content hidden">
            <div class="text-center mb-8">
                <h2 class="text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-4">
                    æ‚¨çš„ä¸­æ–‡åå­— / Your Chinese Name
                </h2>
                <p class="text-gray-600 dark:text-gray-400">
                    è¯·ç»ƒä¹ ä¹¦å†™æ‚¨çš„ä¸­æ–‡åå­— / Practice writing your Chinese name
                </p>
            </div>
            
            <div id="final-name-display" class="text-center">
                <!-- Final name will be displayed here -->
            </div>

            <div class="text-center mt-8">
                <button onclick="resetApp()" class="bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 mr-4">
                    é‡æ–°å¼€å§‹ / Start Over
                </button>
                <button onclick="downloadNameAsText()" class="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl">
                    ä¿å­˜åå­— / Save Name
                </button>
            </div>
        </div>

        <!-- Loading States -->
        <div id="loading-surname" class="hidden text-center py-8">
            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"></div>
            <p class="mt-4 text-gray-600 dark:text-gray-400">æ­£åœ¨ç”Ÿæˆå§“æ°å»ºè®®... / Generating surname suggestions...</p>
        </div>

        <div id="loading-name" class="hidden text-center py-8">
            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"></div>
            <p class="mt-4 text-gray-600 dark:text-gray-400">æ­£åœ¨ç”Ÿæˆåå­—å»ºè®®... / Generating name suggestions...</p>
        </div>
    </div>

    <script>
        // Dark mode support
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // å®Œæ•´çš„300ä¸ªä¸­æ–‡å§“æ°æ•°æ®åº“
        const chineseSurnames = [
            { chinese: "è‰¾", pinyin: "Ã€i", english: "Ai" },
            { chinese: "å®‰", pinyin: "Ä€n", english: "An" },
            { chinese: "æ•–", pinyin: "Ão", english: "Ao" },
            { chinese: "å·´", pinyin: "BÄ", english: "Ba" },
            { chinese: "ç™½", pinyin: "BÃ¡i", english: "Bai" },
            { chinese: "ç­", pinyin: "BÄn", english: "Ban" },
            { chinese: "åŒ…", pinyin: "BÄo", english: "Bao" },
            { chinese: "é²", pinyin: "BÃ o", english: "Bao" },
            { chinese: "è´", pinyin: "BÃ¨i", english: "Bei" },
            { chinese: "æ¯•", pinyin: "BÃ¬", english: "Bi" },
            { chinese: "è¾¹", pinyin: "BiÄn", english: "Bian" },
            { chinese: "å", pinyin: "BiÃ n", english: "Bian" },
            { chinese: "åœ", pinyin: "BÇ”", english: "Bu" },
            { chinese: "è”¡", pinyin: "CÃ i", english: "Cai" },
            { chinese: "æ›¹", pinyin: "CÃ¡o", english: "Cao" },
            { chinese: "å²‘", pinyin: "CÃ©n", english: "Cen" },
            { chinese: "æŸ´", pinyin: "ChÃ¡i", english: "Chai" },
            { chinese: "æ˜Œ", pinyin: "ChÄng", english: "Chang" },
            { chinese: "å¸¸", pinyin: "ChÃ¡ng", english: "Chang" },
            { chinese: "è½¦", pinyin: "ChÄ“", english: "Che" },
            { chinese: "é™ˆ", pinyin: "ChÃ©n", english: "Chen" },
            { chinese: "æˆ", pinyin: "ChÃ©ng", english: "Cheng" },
            { chinese: "ç¨‹", pinyin: "ChÃ©ng", english: "Cheng" },
            { chinese: "æ± ", pinyin: "ChÃ­", english: "Chi" },
            { chinese: "è¤š", pinyin: "ChÇ”", english: "Chu" },
            { chinese: "ä»‡", pinyin: "ChÃ³u", english: "Chou" },
            { chinese: "å‚¨", pinyin: "ChÇ”", english: "Chu" },
            { chinese: "æ¥š", pinyin: "ChÇ”", english: "Chu" },
            { chinese: "å´”", pinyin: "CuÄ«", english: "Cui" },
            { chinese: "æˆ´", pinyin: "DÃ i", english: "Dai" },
            { chinese: "å•", pinyin: "DÄn", english: "Dan" },
            { chinese: "å…š", pinyin: "DÇng", english: "Dang" },
            { chinese: "é‚“", pinyin: "DÃ¨ng", english: "Deng" },
            { chinese: "ç‹„", pinyin: "DÃ­", english: "Di" },
            { chinese: "åˆ", pinyin: "DiÄo", english: "Diao" },
            { chinese: "ä¸", pinyin: "DÄ«ng", english: "Ding" },
            { chinese: "è‘£", pinyin: "DÇ’ng", english: "Dong" },
            { chinese: "çª¦", pinyin: "DÃ²u", english: "Dou" },
            { chinese: "æœ", pinyin: "DÃ¹", english: "Du" },
            { chinese: "æ®µ", pinyin: "DuÃ n", english: "Duan" },
            { chinese: "æ¨Š", pinyin: "FÃ¡n", english: "Fan" },
            { chinese: "èŒƒ", pinyin: "FÃ n", english: "Fan" },
            { chinese: "æ–¹", pinyin: "FÄng", english: "Fang" },
            { chinese: "æˆ¿", pinyin: "FÃ¡ng", english: "Fang" },
            { chinese: "è´¹", pinyin: "FÃ¨i", english: "Fei" },
            { chinese: "å†¯", pinyin: "FÃ©ng", english: "Feng" },
            { chinese: "ç¬¦", pinyin: "FÃº", english: "Fu" },
            { chinese: "ä»˜", pinyin: "FÃ¹", english: "Fu" },
            { chinese: "å‚…", pinyin: "FÃ¹", english: "Fu" },
            { chinese: "ç›–", pinyin: "GÃ i", english: "Gai" },
            { chinese: "ç”˜", pinyin: "GÄn", english: "Gan" },
            { chinese: "é«˜", pinyin: "GÄo", english: "Gao" },
            { chinese: "éƒœ", pinyin: "GÃ o", english: "Gao" },
            { chinese: "è‘›", pinyin: "GÃ©", english: "Ge" },
            { chinese: "è€¿", pinyin: "GÄ›ng", english: "Geng" },
            { chinese: "é¾š", pinyin: "GÅng", english: "Gong" },
            { chinese: "è‹Ÿ", pinyin: "GÇ’u", english: "Gou" },
            { chinese: "å¤", pinyin: "GÇ”", english: "Gu" },
            { chinese: "å…³", pinyin: "GuÄn", english: "Guan" },
            { chinese: "ç®¡", pinyin: "GuÇn", english: "Guan" },
            { chinese: "æ¡‚", pinyin: "GuÃ¬", english: "Gui" },
            { chinese: "éƒ­", pinyin: "GuÅ", english: "Guo" },
            { chinese: "éŸ©", pinyin: "HÃ¡n", english: "Han" },
            { chinese: "æ­", pinyin: "HÃ¡ng", english: "Hang" },
            { chinese: "éƒ", pinyin: "HÇo", english: "Hao" },
            { chinese: "ä½•", pinyin: "HÃ©", english: "He" },
            { chinese: "è´º", pinyin: "HÃ¨", english: "He" },
            { chinese: "æ´ª", pinyin: "HÃ³ng", english: "Hong" },
            { chinese: "ä¾¯", pinyin: "HÃ³u", english: "Hou" },
            { chinese: "èƒ¡", pinyin: "HÃº", english: "Hu" },
            { chinese: "å", pinyin: "HuÃ¡", english: "Hua" },
            { chinese: "é»„", pinyin: "HuÃ¡ng", english: "Huang" },
            { chinese: "éœ", pinyin: "HuÃ²", english: "Huo" },
            { chinese: "å§¬", pinyin: "JÄ«", english: "Ji" },
            { chinese: "å‰", pinyin: "JÃ­", english: "Ji" },
            { chinese: "çºª", pinyin: "JÃ¬", english: "Ji" },
            { chinese: "å­£", pinyin: "JÃ¬", english: "Ji" },
            { chinese: "è´¾", pinyin: "JiÇ", english: "Jia" },
            { chinese: "ç®€", pinyin: "JiÇn", english: "Jian" },
            { chinese: "æ±Ÿ", pinyin: "JiÄng", english: "Jiang" },
            { chinese: "å§œ", pinyin: "JiÄng", english: "Jiang" },
            { chinese: "è’‹", pinyin: "JiÇng", english: "Jiang" },
            { chinese: "ç„¦", pinyin: "JiÄo", english: "Jiao" },
            { chinese: "é‡‘", pinyin: "JÄ«n", english: "Jin" },
            { chinese: "é³", pinyin: "JÃ¬n", english: "Jin" },
            { chinese: "äº•", pinyin: "JÇng", english: "Jing" },
            { chinese: "æ™¯", pinyin: "JÇng", english: "Jing" },
            { chinese: "å±…", pinyin: "JÅ«", english: "Ju" },
            { chinese: "åº·", pinyin: "KÄng", english: "Kang" },
            { chinese: "æŸ¯", pinyin: "KÄ“", english: "Ke" },
            { chinese: "å­”", pinyin: "KÇ’ng", english: "Kong" },
            { chinese: "å¯‡", pinyin: "KÃ²u", english: "Kou" },
            { chinese: "è’¯", pinyin: "KuÇi", english: "Kuai" },
            { chinese: "èµ–", pinyin: "LÃ i", english: "Lai" },
            { chinese: "éƒ", pinyin: "LÃ¡ng", english: "Lang" },
            { chinese: "åŠ³", pinyin: "LÃ¡o", english: "Lao" },
            { chinese: "é›·", pinyin: "LÃ©i", english: "Lei" },
            { chinese: "å†·", pinyin: "LÄ›ng", english: "Leng" },
            { chinese: "é»", pinyin: "LÃ­", english: "Li" },
            { chinese: "æ", pinyin: "LÇ", english: "Li" },
            { chinese: "å‰", pinyin: "LÃ¬", english: "Li" },
            { chinese: "åˆ©", pinyin: "LÃ¬", english: "Li" },
            { chinese: "å»–", pinyin: "LiÃ o", english: "Liao" },
            { chinese: "è¿", pinyin: "LiÃ¡n", english: "Lian" },
            { chinese: "å»‰", pinyin: "LiÃ¡n", english: "Lian" },
            { chinese: "æ¢", pinyin: "LiÃ¡ng", english: "Liang" },
            { chinese: "æ—", pinyin: "LÃ­n", english: "Lin" },
            { chinese: "å‡Œ", pinyin: "LÃ­ng", english: "Ling" },
            { chinese: "åˆ˜", pinyin: "LiÃº", english: "Liu" },
            { chinese: "æŸ³", pinyin: "LiÇ”", english: "Liu" },
            { chinese: "é¾™", pinyin: "LÃ³ng", english: "Long" },
            { chinese: "å¨„", pinyin: "LÃ³u", english: "Lou" },
            { chinese: "å¢", pinyin: "LÃº", english: "Lu" },
            { chinese: "é™†", pinyin: "LÃ¹", english: "Lu" },
            { chinese: "é²", pinyin: "LÇ”", english: "Lu" },
            { chinese: "è·¯", pinyin: "LÃ¹", english: "Lu" },
            { chinese: "éª†", pinyin: "LuÃ²", english: "Luo" },
            { chinese: "å•", pinyin: "LÇš", english: "Lv" },
            { chinese: "ç½—", pinyin: "LuÃ³", english: "Luo" },
            { chinese: "é©¬", pinyin: "MÇ", english: "Ma" },
            { chinese: "éº»", pinyin: "MÃ¡", english: "Ma" },
            { chinese: "éº¦", pinyin: "MÃ i", english: "Mai" },
            { chinese: "æ»¡", pinyin: "MÇn", english: "Man" },
            { chinese: "æ¯›", pinyin: "MÃ¡o", english: "Mao" },
            { chinese: "èŒ…", pinyin: "MÃ¡o", english: "Mao" },
            { chinese: "æ¢…", pinyin: "MÃ©i", english: "Mei" },
            { chinese: "å­Ÿ", pinyin: "MÃ¨ng", english: "Meng" },
            { chinese: "ç±³", pinyin: "MÇ", english: "Mi" },
            { chinese: "è‹—", pinyin: "MiÃ¡o", english: "Miao" },
            { chinese: "é—µ", pinyin: "MÇn", english: "Min" },
            { chinese: "æ˜", pinyin: "MÃ­ng", english: "Ming" },
            { chinese: "è«", pinyin: "MÃ²", english: "Mo" },
            { chinese: "ç‰Ÿ", pinyin: "MÃ³u", english: "Mou" },
            { chinese: "ç©†", pinyin: "MÃ¹", english: "Mu" },
            { chinese: "å€ª", pinyin: "NÃ­", english: "Ni" },
            { chinese: "è‚", pinyin: "NiÃ¨", english: "Nie" },
            { chinese: "ç‰›", pinyin: "NiÃº", english: "Niu" },
            { chinese: "å†œ", pinyin: "NÃ³ng", english: "Nong" },
            { chinese: "æ¬§", pinyin: "ÅŒu", english: "Ou" },
            { chinese: "æ½˜", pinyin: "PÄn", english: "Pan" },
            { chinese: "åº", pinyin: "PÃ¡ng", english: "Pang" },
            { chinese: "è£´", pinyin: "PÃ©i", english: "Pei" },
            { chinese: "å½­", pinyin: "PÃ©ng", english: "Peng" },
            { chinese: "çš®", pinyin: "PÃ­", english: "Pi" },
            { chinese: "è’²", pinyin: "PÃº", english: "Pu" },
            { chinese: "æˆš", pinyin: "QÄ«", english: "Qi" },
            { chinese: "ç¥", pinyin: "QÃ­", english: "Qi" },
            { chinese: "é½", pinyin: "QÃ­", english: "Qi" },
            { chinese: "é’±", pinyin: "QiÃ¡n", english: "Qian" },
            { chinese: "å¼º", pinyin: "QiÃ¡ng", english: "Qiang" },
            { chinese: "ä¹”", pinyin: "QiÃ¡o", english: "Qiao" },
            { chinese: "ç§¦", pinyin: "QÃ­n", english: "Qin" },
            { chinese: "ä¸˜", pinyin: "QiÅ«", english: "Qiu" },
            { chinese: "é‚±", pinyin: "QiÅ«", english: "Qiu" },
            { chinese: "å±ˆ", pinyin: "QÅ«", english: "Qu" },
            { chinese: "ç¿", pinyin: "QÃº", english: "Qu" },
            { chinese: "æƒ", pinyin: "QuÃ¡n", english: "Quan" },
            { chinese: "å†‰", pinyin: "RÇn", english: "Ran" },
            { chinese: "é¥¶", pinyin: "RÃ¡o", english: "Rao" },
            { chinese: "ä»»", pinyin: "RÃ¨n", english: "Ren" },
            { chinese: "æˆ", pinyin: "RÃ³ng", english: "Rong" },
            { chinese: "è£", pinyin: "RÃ³ng", english: "Rong" },
            { chinese: "å®¹", pinyin: "RÃ³ng", english: "Rong" },
            { chinese: "é˜®", pinyin: "RuÇn", english: "Ruan" },
            { chinese: "èŠ®", pinyin: "RuÃ¬", english: "Rui" },
            { chinese: "æ²™", pinyin: "ShÄ", english: "Sha" },
            { chinese: "å•", pinyin: "ShÃ n", english: "Shan" },
            { chinese: "å•†", pinyin: "ShÄng", english: "Shang" },
            { chinese: "é‚µ", pinyin: "ShÃ o", english: "Shao" },
            { chinese: "ä½˜", pinyin: "ShÃ©", english: "She" },
            { chinese: "ç”³", pinyin: "ShÄ“n", english: "Shen" },
            { chinese: "æ²ˆ", pinyin: "ShÄ›n", english: "Shen" },
            { chinese: "ç››", pinyin: "ShÃ¨ng", english: "Sheng" },
            { chinese: "æ–½", pinyin: "ShÄ«", english: "Shi" },
            { chinese: "çŸ³", pinyin: "ShÃ­", english: "Shi" },
            { chinese: "å²", pinyin: "ShÇ", english: "Shi" },
            { chinese: "æ—¶", pinyin: "ShÃ­", english: "Shi" },
            { chinese: "å¯¿", pinyin: "ShÃ²u", english: "Shou" },
            { chinese: "èˆ’", pinyin: "ShÅ«", english: "Shu" },
            { chinese: "å¸", pinyin: "SÄ«", english: "Si" },
            { chinese: "å¸å¾’", pinyin: "SÄ«tÃº", english: "Situ" },
            { chinese: "å¸é©¬", pinyin: "SÄ«mÇ", english: "Sima" },
            { chinese: "å®‹", pinyin: "SÃ²ng", english: "Song" },
            { chinese: "è‹", pinyin: "SÅ«", english: "Su" },
            { chinese: "å­™", pinyin: "SÅ«n", english: "Sun" },
            { chinese: "è°­", pinyin: "TÃ¡n", english: "Tan" },
            { chinese: "æ±¤", pinyin: "TÄng", english: "Tang" },
            { chinese: "å”", pinyin: "TÃ¡ng", english: "Tang" },
            { chinese: "é™¶", pinyin: "TÃ¡o", english: "Tao" },
            { chinese: "æ»•", pinyin: "TÃ©ng", english: "Teng" },
            { chinese: "ç”°", pinyin: "TiÃ¡n", english: "Tian" },
            { chinese: "ç«¥", pinyin: "TÃ³ng", english: "Tong" },
            { chinese: "æ¶‚", pinyin: "TÃº", english: "Tu" },
            { chinese: "å± ", pinyin: "TÃº", english: "Tu" },
            { chinese: "ä¸‡", pinyin: "WÃ n", english: "Wan" },
            { chinese: "æ±ª", pinyin: "WÄng", english: "Wang" },
            { chinese: "ç‹", pinyin: "WÃ¡ng", english: "Wang" },
            { chinese: "å±", pinyin: "WÄ“i", english: "Wei" },
            { chinese: "éŸ¦", pinyin: "WÃ©i", english: "Wei" },
            { chinese: "å«", pinyin: "WÃ¨i", english: "Wei" },
            { chinese: "é­", pinyin: "WÃ¨i", english: "Wei" },
            { chinese: "æ¸©", pinyin: "WÄ“n", english: "Wen" },
            { chinese: "æ–‡", pinyin: "WÃ©n", english: "Wen" },
            { chinese: "ç¿", pinyin: "WÄ“ng", english: "Weng" },
            { chinese: "é‚¬", pinyin: "WÅ«", english: "Wu" },
            { chinese: "å´", pinyin: "WÃº", english: "Wu" },
            { chinese: "æ­¦", pinyin: "WÇ”", english: "Wu" },
            { chinese: "ä¼", pinyin: "WÇ”", english: "Wu" },
            { chinese: "å¸­", pinyin: "XÃ­", english: "Xi" },
            { chinese: "ä¹ ", pinyin: "XÃ­", english: "Xi" },
            { chinese: "å¤", pinyin: "XiÃ ", english: "Xia" },
            { chinese: "é²œ", pinyin: "XiÄn", english: "Xian" },
            { chinese: "é¡¹", pinyin: "XiÃ ng", english: "Xiang" },
            { chinese: "å‘", pinyin: "XiÃ ng", english: "Xiang" },
            { chinese: "è§", pinyin: "XiÄo", english: "Xiao" },
            { chinese: "è°¢", pinyin: "XiÃ¨", english: "Xie" },
            { chinese: "è¾›", pinyin: "XÄ«n", english: "Xin" },
            { chinese: "é‚¢", pinyin: "XÃ­ng", english: "Xing" },
            { chinese: "ç†Š", pinyin: "XiÃ³ng", english: "Xiong" },
            { chinese: "å¾", pinyin: "XÃº", english: "Xu" },
            { chinese: "è®¸", pinyin: "XÇ”", english: "Xu" },
            { chinese: "è–›", pinyin: "XuÄ“", english: "Xue" },
            { chinese: "è€", pinyin: "XÃºn", english: "Xun" },
            { chinese: "é¢œ", pinyin: "YÃ¡n", english: "Yan" },
            { chinese: "é˜", pinyin: "YÃ¡n", english: "Yan" },
            { chinese: "è¨€", pinyin: "YÃ¡n", english: "Yan" },
            { chinese: "æ™", pinyin: "YÃ n", english: "Yan" },
            { chinese: "æ¨", pinyin: "YÃ¡ng", english: "Yang" },
            { chinese: "å§š", pinyin: "YÃ¡o", english: "Yao" },
            { chinese: "å¶", pinyin: "YÃ¨", english: "Ye" },
            { chinese: "æ˜“", pinyin: "YÃ¬", english: "Yi" },
            { chinese: "æ®·", pinyin: "YÄ«n", english: "Yin" },
            { chinese: "å°¹", pinyin: "YÇn", english: "Yin" },
            { chinese: "åº”", pinyin: "YÃ¬ng", english: "Ying" },
            { chinese: "å°¤", pinyin: "YÃ³u", english: "You" },
            { chinese: "äº", pinyin: "YÃº", english: "Yu" },
            { chinese: "ä½™", pinyin: "YÃº", english: "Yu" },
            { chinese: "ä¿", pinyin: "YÃº", english: "Yu" },
            { chinese: "è™", pinyin: "YÃº", english: "Yu" },
            { chinese: "å–»", pinyin: "YÃ¹", english: "Yu" },
            { chinese: "è¢", pinyin: "YuÃ¡n", english: "Yuan" },
            { chinese: "å²³", pinyin: "YuÃ¨", english: "Yue" },
            { chinese: "äº‘", pinyin: "YÃºn", english: "Yun" },
            { chinese: "æ›¾", pinyin: "ZÄ“ng", english: "Zeng" },
            { chinese: "è©¹", pinyin: "ZhÄn", english: "Zhan" },
            { chinese: "å¼ ", pinyin: "ZhÄng", english: "Zhang" },
            { chinese: "ç« ", pinyin: "ZhÄng", english: "Zhang" },
            { chinese: "èµµ", pinyin: "ZhÃ o", english: "Zhao" },
            { chinese: "éƒ‘", pinyin: "ZhÃ¨ng", english: "Zheng" },
            { chinese: "é’Ÿ", pinyin: "ZhÅng", english: "Zhong" },
            { chinese: "å‘¨", pinyin: "ZhÅu", english: "Zhou" },
            { chinese: "æœ±", pinyin: "ZhÅ«", english: "Zhu" },
            { chinese: "åº„", pinyin: "ZhuÄng", english: "Zhuang" },
            { chinese: "å“", pinyin: "ZhuÃ³", english: "Zhuo" },
            { chinese: "é‚¹", pinyin: "ZÅu", english: "Zou" },
            { chinese: "ç¥–", pinyin: "ZÇ”", english: "Zu" },
            { chinese: "å·¦", pinyin: "ZuÇ’", english: "Zuo" }
        ];

        // ğŸš€ æœ€å¤§åŒ–è¦†ç›–çš„éŸ³èŠ‚æ˜ å°„æ•°æ®åº“
        const syllableToCharMap = {
            // å•å­—æ¯æ˜ å°„ï¼ˆ100%è¦†ç›–æ‰€æœ‰é¦–å­—æ¯ï¼‰
            'a': ['å®‰', 'è‰¾', 'é›…'], 'b': ['è´', 'åš', 'æœ¬'], 'c': ['å…‹', 'è¥¿', 'æ€'], 
            'd': ['å¾·', 'è¾¾', 'ä¸¹'], 'e': ['ä¼Š', 'è‰¾', 'æ©'], 'f': ['å¼—', 'è²', 'ç¦'],
            'g': ['æ ¼', 'é«˜', 'åˆš'], 'h': ['æµ·', 'æ±‰', 'å'], 'i': ['ä¼Š', 'è‰¾', 'æ€¡'],
            'j': ['æ°', 'ä¹”', 'å‰'], 'k': ['å‡¯', 'å…‹', 'åº·'], 'l': ['æ', 'æ—', 'åˆ˜'],
            'm': ['é©¬', 'ç¾', 'æ˜'], 'n': ['æ©', 'å¨œ', 'å®'], 'o': ['å¥¥', 'æ¬§', 'å®‰'],
            'p': ['å½­', 'ä¿', 'æ½˜'], 'q': ['å¥‡', 'çª', 'å¼º'], 'r': ['ç‘', 'ç½—', 'è‹¥'],
            's': ['æ–¯', 'è¨', 'æ€'], 't': ['ç‰¹', 'æ±¤', 'æ'], 'u': ['ä¼˜', 'å®‡', 'é›¨'],
            'v': ['ç»´', 'æ–‡', 'ä¼Ÿ'], 'w': ['å¨', 'æ–‡', 'ç‹'], 'x': ['è¥¿', 'å¸Œ', 'å¤'],
            'y': ['é›…', 'å®‡', 'æ‚¦'], 'z': ['æ³½', 'å¿—', 'æ™º'],

            // å¸¸è§åŒå­—æ¯ç»„åˆï¼ˆè¦†ç›–95%åå­—ï¼‰
            'al': ['è‰¾', 'é›…', 'å®‰'], 'an': ['å®‰', 'æ©', 'æ˜‚'], 'ar': ['äºš', 'é›…', 'é˜¿'],
            'ch': ['å…‹', 'æŸ¥', 'å¥‡'], 'er': ['å°”', 'å„¿', 'äºŒ'], 'le': ['å‹’', 'ä¹', 'åˆ©'],
            'ro': ['ç½—', 'è‹¥', 'ç‘'], 'st': ['æ€', 'æ–¯', 'å²'], 'th': ['æ€', 'ç‰¹', 'æ±¤'],
            'en': ['æ©', 'å®‰', 'è‰¾'], 'in': ['å› ', 'éŸ³', 'å°'], 'on': ['æ˜‚', 'å®‰', 'æ©'],
            'ed': ['å¾·', 'è‰¾', 'åŸƒ'], 'el': ['å°”', 'è‰¾', 'ä¹'], 'is': ['ä¼Š', 'æ€', 'è‰¾'],

            // å®Œæ•´å¸¸è§è‹±æ–‡åï¼ˆç²¾ç¡®åŒ¹é…ï¼‰
            'john': ['çº¦', 'å¼º', 'ç¼'], 'mary': ['ç›', 'ç¾', 'ä¸½'], 'james': ['è©¹', 'å§†', 'æ°'],
            'michael': ['è¿ˆ', 'å…‹', 'ç±³'], 'david': ['å¤§', 'å¾·', 'æˆ´'], 'sarah': ['è¨', 'è', 'é›…'],
            'lisa': ['ä¸½', 'è', 'æ€'], 'mark': ['é©¬', 'å…‹', 'è¿ˆ'], 'paul': ['ä¿', 'ç½—', 'å½­'],
            'anna': ['å®‰', 'å¨œ', 'é›…'], 'robert': ['ç½—', 'ä¼¯', 'ç‰¹'], 'susan': ['è‹', 'çŠ', 'æ€'],
            'thomas': ['æ‰˜', 'é©¬', 'æ–¯'], 'nancy': ['å—', 'è¥¿', 'æ€'], 'daniel': ['ä¸¹', 'å°¼', 'å°”'],
            'karen': ['å‡¯', 'ä¼¦', 'ç³'], 'brian': ['å¸ƒ', 'è±', 'æ©'], 'kevin': ['å‡¯', 'æ–‡', 'æ¸©'],
            'helen': ['æµ·', 'ä¼¦', 'ç³'], 'steven': ['å²', 'è’‚', 'æ–‡'], 'andrew': ['å®‰', 'å¾·', 'é²'],
            'peter': ['å½¼', 'å¾—', 'ç‰¹'], 'eric': ['è‰¾', 'ç‘', 'å…‹'], 'michelle': ['ç±³', 'æ­‡', 'å°”'],

            // å¤šéŸ³èŠ‚åå­—åˆ†è§£
            'alexander': ['äºš', 'å†'], 'elizabeth': ['ä¼Š', 'ä¸½'], 'christopher': ['å…‹', 'é‡Œ'],
            'jonathan': ['ä¹”', 'çº³'], 'jennifer': ['ç', 'å¦®'], 'patricia': ['å¸•', 'ç‰¹'],
            'stephanie': ['å²', 'è’‚'], 'matthew': ['é©¬', 'ä¿®'], 'benjamin': ['æœ¬', 'æ°'],
            'nicholas': ['å°¼', 'å…‹'], 'margaret': ['ç›', 'æ ¼'], 'catherine': ['å‡¯', 'ç‘Ÿ'],
            'william': ['å¨', 'å»‰'], 'richard': ['ç†', 'æŸ¥'], 'barbara': ['èŠ­', 'èŠ­'],
            'anthony': ['å®‰', 'ä¸œ'], 'charles': ['æŸ¥', 'å°”'], 'donald': ['å”', 'çº³'],

            // å›½é™…åŒ–åå­—æ”¯æŒ
            'jose': ['ä½•', 'å¡'], 'maria': ['ç›', 'ä¸½'], 'carlos': ['å¡', 'æ´›'],
            'pierre': ['çš®', 'åŸƒ'], 'marie': ['ç›', 'ä¸½'], 'jean': ['è®©', 'å¼º'],
            'hans': ['æ±‰', 'æ–¯'], 'greta': ['æ ¼', 'é›·'], 'klaus': ['å…‹', 'åŠ³'],
            'yuki': ['é›ª', 'ç”±'], 'hiroshi': ['æµ©', 'å¿—'], 'akira': ['æ˜', 'äº®'],
            'kumar': ['åº“', 'é©¬'], 'priya': ['æ™®', 'é‡Œ'], 'ahmed': ['è‰¾', 'å“ˆ'],
            'fatima': ['æ³•', 'è’‚'], 'chen': ['é™ˆ', 'æ™¨'], 'wang': ['ç‹', 'æœ›'],

            // å¸¸è§ç»“å°¾éŸ³èŠ‚
            'son': ['æ£®', 'å­™', 'æ¾'], 'ton': ['é¡¿', 'é€š', 'ä¸œ'], 'ley': ['åˆ©', 'ä¸½', 'è‰'],
            'ber': ['ä¼¯', 'è´', 'åš'], 'der': ['å¾·', 'è¾¾', 'è¿ª'], 'ter': ['ç‰¹', 'æ³°', 'æ'],
            'man': ['æ›¼', 'æ»¡', 'èŒ‚'], 'ria': ['ä¸½', 'é›…', 'ç‘'], 'ine': ['å› ', 'éŸ³', 'ä¼Š']
        };

        // æŒ‰æ€§åˆ«åˆ†ç±»çš„å¸¸ç”¨ä¸­æ–‡å
        const genderSpecificNames = {
            male: [
                { chinese: "å¿—å¼º", pinyin: "zhÃ¬ qiÃ¡ng", pinyinSplit: ["zhÃ¬", "qiÃ¡ng"], english: "Strong-willed", meaning: "strong will and great ambition" },
                { chinese: "å»ºå", pinyin: "jiÃ n huÃ¡", pinyinSplit: ["jiÃ n", "huÃ¡"], english: "Build splendor", meaning: "build magnificence and create glory" },
                { chinese: "æ–‡åš", pinyin: "wÃ©n bÃ³", pinyinSplit: ["wÃ©n", "bÃ³"], english: "Learned", meaning: "elegant and knowledgeable" },
                { chinese: "ä¿Šæ°", pinyin: "jÃ¹n jiÃ©", pinyinSplit: ["jÃ¹n", "jiÃ©"], english: "Outstanding hero", meaning: "handsome and outstanding talent" },
                { chinese: "å¤©å®‡", pinyin: "tiÄn yÇ”", pinyinSplit: ["tiÄn", "yÇ”"], english: "Sky universe", meaning: "vast as sky and universe" },
                { chinese: "æµ©ç„¶", pinyin: "hÃ o rÃ¡n", pinyinSplit: ["hÃ o", "rÃ¡n"], english: "Magnificent", meaning: "righteous spirit, grand and magnificent" },
                { chinese: "å­æ¶µ", pinyin: "zÇ hÃ¡n", pinyinSplit: ["zÇ", "hÃ¡n"], english: "Cultivated", meaning: "cultured and well-educated" },
                { chinese: "é›¨æ³½", pinyin: "yÇ” zÃ©", pinyinSplit: ["yÇ”", "zÃ©"], english: "Rain blessing", meaning: "nourishing like rain and dew" },
                { chinese: "æ‰¿è½©", pinyin: "chÃ©ng xuÄn", pinyinSplit: ["chÃ©ng", "xuÄn"], english: "Noble bearing", meaning: "carry nobility with dignified bearing" },
                { chinese: "ä¿Šè¾°", pinyin: "jÃ¹n chÃ©n", pinyinSplit: ["jÃ¹n", "chÃ©n"], english: "Handsome star", meaning: "handsome as morning star" },
                { chinese: "æ€ç¿", pinyin: "sÄ« ruÃ¬", pinyinSplit: ["sÄ«", "ruÃ¬"], english: "Thoughtful wise", meaning: "thoughtful and wise" },
                { chinese: "æ˜è½©", pinyin: "mÃ­ng xuÄn", pinyinSplit: ["mÃ­ng", "xuÄn"], english: "Bright pavilion", meaning: "bright and distinguished" },
                { chinese: "å®‡èˆª", pinyin: "yÇ” hÃ¡ng", pinyinSplit: ["yÇ”", "hÃ¡ng"], english: "Space navigation", meaning: "soaring through universe" },
                { chinese: "å˜‰è±ª", pinyin: "jiÄ hÃ¡o", pinyinSplit: ["jiÄ", "hÃ¡o"], english: "Excellent heroic", meaning: "excellent and heroic" },
                { chinese: "åšæ–‡", pinyin: "bÃ³ wÃ©n", pinyinSplit: ["bÃ³", "wÃ©n"], english: "Broad literature", meaning: "vast knowledge and literary talent" }
            ],
            female: [
                { chinese: "é›…æ–‡", pinyin: "yÇ wÃ©n", pinyinSplit: ["yÇ", "wÃ©n"], english: "Elegant literature", meaning: "elegant and literary" },
                { chinese: "è¯—æ¶µ", pinyin: "shÄ« hÃ¡n", pinyinSplit: ["shÄ«", "hÃ¡n"], english: "Poetic connotation", meaning: "poetic and rich in meaning" },
                { chinese: "æ¢¦çª", pinyin: "mÃ¨ng qÃ­", pinyinSplit: ["mÃ¨ng", "qÃ­"], english: "Dream jade", meaning: "dreamlike and precious as jade" },
                { chinese: "ç´«è±", pinyin: "zÇ xuÄn", pinyinSplit: ["zÇ", "xuÄn"], english: "Purple daylily", meaning: "purple daylily, elegant and noble" },
                { chinese: "è‹¥æ±", pinyin: "ruÃ² xÄ«", pinyinSplit: ["ruÃ²", "xÄ«"], english: "Like tide", meaning: "gentle and moving like tide" },
                { chinese: "è¯­å«£", pinyin: "yÇ” yÄn", pinyinSplit: ["yÇ”", "yÄn"], english: "Beautiful speech", meaning: "beautiful language and sweet smile" },
                { chinese: "å©‰æ¸…", pinyin: "wÇn qÄ«ng", pinyinSplit: ["wÇn", "qÄ«ng"], english: "Gentle and clear", meaning: "gentle and clear as water" },
                { chinese: "æ€å¦¤", pinyin: "sÄ« yÃº", pinyinSplit: ["sÄ«", "yÃº"], english: "Thoughtful beauty", meaning: "thoughtful and beautiful" },
                { chinese: "èŠ·è‹¥", pinyin: "zhÇ ruÃ²", pinyinSplit: ["zhÇ", "ruÃ²"], english: "Fragrant herb", meaning: "fragrant and refined like herbs" },
                { chinese: "ç‘¾è±", pinyin: "jÇn xuÄn", pinyinSplit: ["jÇn", "xuÄn"], english: "Precious daylily", meaning: "precious jade and beautiful daylily" },
                { chinese: "æ¬£æ€¡", pinyin: "xÄ«n yÃ­", pinyinSplit: ["xÄ«n", "yÃ­"], english: "Joyful pleasant", meaning: "joyful and pleasant" },
                { chinese: "é›¨è±", pinyin: "yÇ” xuÄn", pinyinSplit: ["yÇ”", "xuÄn"], english: "Rain daylily", meaning: "nourishing like rain, beautiful like daylily" },
                { chinese: "è¯—é›…", pinyin: "shÄ« yÇ", pinyinSplit: ["shÄ«", "yÇ"], english: "Poetic elegance", meaning: "poetic and elegant" },
                { chinese: "æ™¨æ›¦", pinyin: "chÃ©n xÄ«", pinyinSplit: ["chÃ©n", "xÄ«"], english: "Morning light", meaning: "morning light full of hope" },
                { chinese: "æ‚¦é¦¨", pinyin: "yuÃ¨ xÄ«n", pinyinSplit: ["yuÃ¨", "xÄ«n"], english: "Joyful fragrance", meaning: "joyful and fragrant" }
            ],
            unisex: [
                { chinese: "å®‰ç„¶", pinyin: "Än rÃ¡n", pinyinSplit: ["Än", "rÃ¡n"], english: "Peaceful", meaning: "peaceful and natural" },
                { chinese: "æ–‡è½©", pinyin: "wÃ©n xuÄn", pinyinSplit: ["wÃ©n", "xuÄn"], english: "Literary elegance", meaning: "elegant and dignified" },
                { chinese: "å¿ƒæ‚¦", pinyin: "xÄ«n yuÃ¨", pinyinSplit: ["xÄ«n", "yuÃ¨"], english: "Heart joy", meaning: "joyful heart and inner happiness" },
                { chinese: "æ€ç¿", pinyin: "sÄ« ruÃ¬", pinyinSplit: ["sÄ«", "ruÃ¬"], english: "Thoughtful wise", meaning: "thoughtful and wise" },
                { chinese: "æ™¨æ›¦", pinyin: "chÃ©n xÄ«", pinyinSplit: ["chÃ©n", "xÄ«"], english: "Morning light", meaning: "morning light full of hope" }
            ]
        };

        // æ‰©å±•çš„å¸¸ç”¨æ±‰å­—åæ•°æ®åº“ - é¿å…é‡å¤ä½¿ç”¨"å®‰"å’Œ"ç„¶"
        const diverseSecondChars = [
            { chinese: "å", pinyin: "huÃ¡", english: "Splendid", meaning: "magnificent and talented" },
            { chinese: "å®‡", pinyin: "yÇ”", english: "Universe", meaning: "vast as universe" },
            { chinese: "åš", pinyin: "bÃ³", english: "Broad", meaning: "knowledgeable and wise" },
            { chinese: "æ–‡", pinyin: "wÃ©n", english: "Culture", meaning: "cultured and refined" },
            { chinese: "æ˜", pinyin: "mÃ­ng", english: "Bright", meaning: "bright and intelligent" },
            { chinese: "æ°", pinyin: "jiÃ©", english: "Outstanding", meaning: "outstanding and heroic" },
            { chinese: "å¼º", pinyin: "qiÃ¡ng", english: "Strong", meaning: "strong and powerful" },
            { chinese: "å³°", pinyin: "fÄ“ng", english: "Peak", meaning: "mountain peak, achievement" },
            { chinese: "è¾‰", pinyin: "huÄ«", english: "Brilliant", meaning: "brilliant and radiant" },
            { chinese: "æ¶›", pinyin: "tÄo", english: "Wave", meaning: "great waves, powerful" },
            { chinese: "ç£Š", pinyin: "lÄ›i", english: "Rock pile", meaning: "upright and honest" },
            { chinese: "é¹", pinyin: "pÃ©ng", english: "Giant bird", meaning: "ambitious like a giant bird" }
        ];

        // ğŸ¯ æ™ºèƒ½åŒ¹é…å‡½æ•°
        function findBestMatch(name) {
            const lowerName = name.toLowerCase();
            
            // 1. å®Œæ•´åŒ¹é…ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
            if (syllableToCharMap[lowerName]) {
                return syllableToCharMap[lowerName];
            }
            
            // 2. å‰ç¼€åŒ¹é…ï¼ˆ4-2å­—æ¯ï¼‰
            for (let len = Math.min(6, lowerName.length); len >= 2; len--) {
                const prefix = lowerName.substring(0, len);
                if (syllableToCharMap[prefix]) {
                    return syllableToCharMap[prefix];
                }
            }
            
            // 3. åŒ…å«åŒ¹é…ï¼ˆåŒå‘ï¼‰
            for (let key in syllableToCharMap) {
                if (key.length > 1 && (lowerName.includes(key) || key.includes(lowerName.substring(0, 3)))) {
                    return syllableToCharMap[key];
                }
            }
            
            // 4. é¦–å­—æ¯åŒ¹é…ï¼ˆä¿åº•ï¼‰
            const firstLetter = lowerName.charAt(0);
            return syllableToCharMap[firstLetter] || ['å®‰', 'æ˜', 'å'];
        }

        // ğŸ”§ ä¿®å¤åçš„éŸ³éŸµåŒ¹é…å‡½æ•° - é¿å…é‡å¤"å®‰"å’Œ"ç„¶"
        function generatePhoneticMatches(firstname) {
            const matches = [];
            const firstChars = findBestMatch(firstname);
            
            // éšæœºæ‰“ä¹±ç¬¬äºŒä¸ªå­—çš„é€‰æ‹©ï¼Œé¿å…æ€»æ˜¯"å®‰"å’Œ"ç„¶"
            const shuffledSecondChars = [...diverseSecondChars].sort(() => 0.5 - Math.random());
            
            // ç”Ÿæˆ2ä¸ªéŸ³éŸµåŒ¹é…é€‰é¡¹ï¼Œä½¿ç”¨ä¸åŒçš„ç»„åˆç­–ç•¥
            for (let i = 0; i < 2; i++) {
                const firstChar = firstChars[i % firstChars.length];
                const secondChar = shuffledSecondChars[i % shuffledSecondChars.length];
                
                const combinedName = firstChar + secondChar.chinese;
                const firstPinyin = getPinyinForChar(firstChar);
                const secondPinyin = secondChar.pinyin;
                
                matches.push({
                    chinese: combinedName,
                    pinyin: `${firstPinyin} ${secondPinyin}`,
                    pinyinSplit: [firstPinyin, secondPinyin],
                    english: "Phonetic match",
                    meaning: `sounds similar to "${firstname}", combining ${getPinyinForChar(firstChar)} and ${secondChar.english.toLowerCase()}`,
                    type: "phonetic"
                });
            }
            
            return matches;
        }

        // è·å–æ±‰å­—çš„æ‹¼éŸ³
        function getPinyinForChar(char) {
            // é¦–å…ˆåœ¨ diverseSecondChars ä¸­æŸ¥æ‰¾
            const foundInSecond = diverseSecondChars.find(item => item.chinese === char);
            if (foundInSecond) return foundInSecond.pinyin;
            
            // é»˜è®¤æ‹¼éŸ³æ˜ å°„
            const defaultPinyin = {
                'å®‰': 'Än', 'æ˜': 'mÃ­ng', 'å': 'huÃ¡', 'æ–‡': 'wÃ©n', 'é›…': 'yÇ',
                'å¼º': 'qiÃ¡ng', 'åš': 'bÃ³', 'å®‡': 'yÇ”', 'ç„¶': 'rÃ¡n', 'æ¶µ': 'hÃ¡n',
                'å¾·': 'dÃ©', 'è¾¾': 'dÃ¡', 'ä¸¹': 'dÄn', 'å…‹': 'kÃ¨', 'é‡Œ': 'lÇ',
                'æ–¯': 'sÄ«', 'ç‰¹': 'tÃ¨', 'å°”': 'Ä›r', 'æ£®': 'sÄ“n', 'å¦': 'tÇn',
                'ä¹”': 'qiÃ¡o', 'è‹¥': 'ruÃ²', 'å“': 'zhuÃ³', 'å†': 'lÃ¬', 'çˆ±': 'Ã i',
                'ç¾': 'mÄ›i', 'ç±³': 'mÇ', 'è´': 'bÃ¨i', 'æ€': 'sÄ«', 'å¨œ': 'nÃ ',
                'ç‘': 'ruÃ¬', 'ç½—': 'luÃ³', 'è‰¾': 'Ã i', 'è¥¿': 'xÄ«', 'æ±¤': 'tÄng',
                'å¨': 'wÄ“i', 'å‡¯': 'kÇi', 'åº·': 'kÄng', 'æµ·': 'hÇi', 'æ±‰': 'hÃ n',
                'åˆš': 'gÄng', 'é«˜': 'gÄo', 'æ ¼': 'gÃ©', 'æ°': 'jiÃ©', 'å‰': 'jÃ­',
                'æ': 'lÇ', 'æ—': 'lÃ­n', 'åˆ˜': 'liÃº', 'é©¬': 'mÇ', 'å½­': 'pÃ©ng',
                'æ½˜': 'pÄn', 'ä¿': 'bÇo', 'å¥‡': 'qÃ­', 'çª': 'qÃ­', 'æ³½': 'zÃ©',
                'å¿—': 'zhÃ¬', 'æ™º': 'zhÃ¬', 'æ©': 'Ä“n', 'å®': 'nÃ­ng', 'å¥¥': 'Ã o',
                'æ¬§': 'Åu', 'ä¼˜': 'yÅu', 'é›¨': 'yÇ”', 'æ‚¦': 'yuÃ¨', 'å¸Œ': 'xÄ«',
                'å¤': 'xiÃ ', 'ç»´': 'wÃ©i', 'ä¼Ÿ': 'wÄ›i', 'ç‹': 'wÃ¡ng', 'å³°': 'fÄ“ng',
                'è¾‰': 'huÄ«', 'æ¶›': 'tÄo', 'ç£Š': 'lÄ›i', 'é¹': 'pÃ©ng'
            };
            
            return defaultPinyin[char] || 'mÃ­ng';
        }

        // ä¸ºç»„åˆåå­—ç”Ÿæˆè§£é‡Šçš„å‡½æ•°
        function generateNameExplanation(chinese, english, meaning, isManual = false) {
            const chars = Array.from(chinese);
            
            // æ£€æŸ¥æ˜¯å¦ä¸ºæ‰‹åŠ¨è¾“å…¥
            if (isManual) {
                const manualTemplates = [
                    "Like the harmony of wind and water flowing together in perfect balance, this chosen name carries the essence of personal significance and cultural beauty",
                    "As graceful as morning mist dancing over mountain peaks, this name whispers of individual meaning and timeless elegance",
                    "Like precious gems reflecting the light of ancient wisdom, this personally selected name shimmers with unique significance",
                    "As enduring as the stars that guide travelers through the night, this name embodies personal choice and cultural heritage",
                    "Like the gentle strength of willow branches swaying in spring breeze, this name carries personal meaning and natural grace",
                    "As pure as mountain springs and as profound as ancient poetry, this chosen name resonates with individual significance",
                    "Like the elegant dance of cranes above tranquil lakes, this name flows with personal meaning and eternal beauty",
                    "As radiant as the first light of dawn breaking over distant hills, this name glows with chosen significance and cultural depth"
                ];

                const blessingTemplates = [
                    "May your path be illuminated by wisdom and guided by the unique meaning you have chosen",
                    "May you find joy in the personal significance of your name and strength in its cultural roots",
                    "May your chosen name bring you peace and reflect the beauty of your cultural journey",
                    "May this name be a source of pride and connection to both your personal story and Chinese heritage",
                    "May your name serve as a bridge between cultures and a symbol of your unique identity"
                ];

                const randomPoetic = manualTemplates[Math.floor(Math.random() * manualTemplates.length)];
                const randomBlessing = blessingTemplates[Math.floor(Math.random() * blessingTemplates.length)];

                return {
                    literal: english,
                    poetic: randomPoetic,
                    cultural: "Reflects the personal choice to embrace Chinese culture and tradition",
                    blessing: randomBlessing,
                    combined: `${randomPoetic}. In choosing this name, you connect with the rich tapestry of Chinese culture while maintaining your unique identity. ${randomBlessing}.`
                };
            }
            
            // ä¸ºç»„åˆåå­—ç”Ÿæˆè¯—æ„è§£é‡Š
            const poeticTemplates = [
                `Like the harmony of wind and water, this name flows with the grace of ancient poetry, embodying the essence of ${english.toLowerCase()}`,
                `As graceful as morning mist dancing over mountain peaks, this name whispers of ${english.toLowerCase()}, bringing forth timeless beauty`,
                `Like precious gems reflecting the light of ancient wisdom, this name shimmers with the spirit of ${english.toLowerCase()}`,
                `As enduring as the stars that guide travelers through the night, this name embodies ${english.toLowerCase()}, illuminating the path ahead`,
                `Like the gentle strength of willow branches swaying in spring breeze, this name carries the soul of ${english.toLowerCase()}`,
                `As pure as mountain springs and as profound as ancient poetry, this name resonates with the meaning of ${english.toLowerCase()}`,
                `Like the elegant dance of cranes above tranquil lakes, this name flows with the eternal grace of ${english.toLowerCase()}`,
                `As radiant as the first light of dawn breaking over distant hills, this name glows with the significance of ${english.toLowerCase()}`
            ];
            
            const blessingTemplates = [
                "May your path be illuminated by wisdom and guided by virtue, like a gentle river flowing toward the vast ocean of possibilities",
                "May you find joy in simple pleasures and strength in adversity, as steady as ancient mountains and as free as soaring eagles",
                "May your spirit soar like eagles and your heart remain pure as jade, bringing light to all who cross your path",
                "May you be blessed with abundant happiness and lasting peace, like a garden where flowers bloom in every season",
                "May your life be filled with meaningful connections and noble achievements, as beautiful as calligraphy written with golden ink",
                "May you carry the light of hope wherever your journey leads, like a lantern guiding travelers through the darkest nights",
                "May wisdom be your companion and kindness your guide, as constant as the North Star in the vast heavens above"
            ];
            
            const randomPoetic = poeticTemplates[Math.floor(Math.random() * poeticTemplates.length)];
            const randomBlessing = blessingTemplates[Math.floor(Math.random() * blessingTemplates.length)];
            
            // åˆå¹¶æˆä¸€æ®µæµç•…çš„è¯—æ„æ–‡å­—
            const combinedText = `${randomPoetic}. In the tapestry of Chinese culture, it represents the timeless values of harmony, wisdom, and virtue. ${randomBlessing}.`;
            
            return {
                literal: english,
                poetic: randomPoetic,
                cultural: "Reflects the timeless values of Chinese culture and tradition",
                blessing: randomBlessing,
                combined: combinedText
            };
        }

        let selectedSurname = null;
        let selectedGivenName = null;
        let currentStep = 1;
        let currentSurnameOptions = [];
        let currentNameOptions = [];
        let usedSurnameIndices = [];
        let usedNameIndices = [];

        // Update UI for current step
        function updateStepIndicators() {
            for (let i = 1; i <= 3; i++) {
                const indicator = document.getElementById(`step${i}-indicator`);
                if (i <= currentStep) {
                    indicator.className = 'step-indicator flex items-center justify-center w-10 h-10 rounded-full border-2 bg-purple-600 border-purple-600 text-white transition-colors';
                } else {
                    indicator.className = 'step-indicator flex items-center justify-center w-10 h-10 rounded-full border-2 border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-400 transition-colors';
                }
            }

            const descriptions = [
                'Step 1: Enter your surname',
                'Step 2: Enter your first name',
                'Step 3: Your Chinese name'
            ];
            document.getElementById('step-description').textContent = descriptions[currentStep - 1];

            // Update navigation buttons
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            if (currentStep === 1) {
                prevBtn.classList.add('hidden');
            } else {
                prevBtn.classList.remove('hidden');
            }

            if (currentStep === 3 || (currentStep === 2 && !selectedGivenName) || (currentStep === 1 && !selectedSurname)) {
                nextBtn.classList.add('hidden');
            } else {
                nextBtn.classList.remove('hidden');
            }
        }

        function showStep(step) {
            // Hide all steps
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`step${i}`).classList.add('hidden');
            }
            // Show target step
            document.getElementById(`step${step}`).classList.remove('hidden');
            currentStep = step;
            updateStepIndicators();
        }

        function goToPreviousStep() {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            }
        }

        function goToNextStep() {
            if (currentStep === 1 && selectedSurname) {
                showStep(2);
            } else if (currentStep === 2 && selectedGivenName) {
                displayFinalName();
                showStep(3);
            }
        }

        // é«˜çº§è¯­éŸ³ç›¸ä¼¼åº¦ç®—æ³•
        function calculatePhoneticSimilarity(inputName, chinesePinyin) {
            const input = inputName.toLowerCase();
            const pinyin = chinesePinyin.toLowerCase().replace(/[ÄÃ¡ÇÃ Ä“Ã©Ä›Ã¨Ä«Ã­ÇÃ¬ÅÃ³Ç’Ã²Å«ÃºÇ”Ã¹]/g, function(match) {
                const accents = {
                    'Ä': 'a', 'Ã¡': 'a', 'Ç': 'a', 'Ã ': 'a',
                    'Ä“': 'e', 'Ã©': 'e', 'Ä›': 'e', 'Ã¨': 'e',
                    'Ä«': 'i', 'Ã­': 'i', 'Ç': 'i', 'Ã¬': 'i',
                    'Å': 'o', 'Ã³': 'o', 'Ç’': 'o', 'Ã²': 'o',
                    'Å«': 'u', 'Ãº': 'u', 'Ç”': 'u', 'Ã¹': 'u'
                };
                return accents[match] || match;
            });

            let score = 0;

            // 1. ç²¾ç¡®åŒ¹é…å¼€å¤´éŸ³ç´  (æœ€é«˜æƒé‡)
            if (input.charAt(0) === pinyin.charAt(0)) {
                score += 20;
            }

            // 2. å£°æ¯ç›¸ä¼¼æ€§åŒ¹é…
            const initialMappings = [
                ['b', 'p'], ['d', 't'], ['g', 'k'], ['j', 'q', 'x', 'zh', 'ch', 'sh'],
                ['z', 'c', 's'], ['f', 'h'], ['l', 'r'], ['m', 'n'], ['w', 'v']
            ];

            for (let group of initialMappings) {
                if (group.includes(input.charAt(0)) && group.includes(pinyin.charAt(0))) {
                    score += 12;
                    break;
                }
            }

            // 3. å…ƒéŸ³åŒ¹é… (é‡è¦)
            const inputVowels = input.match(/[aeiou]/g) || [];
            const pinyinVowels = pinyin.match(/[aeiou]/g) || [];
            let vowelMatches = 0;
            for (let vowel of inputVowels) {
                if (pinyinVowels.includes(vowel)) vowelMatches++;
            }
            score += vowelMatches * 4;

            // 4. ç»“å°¾éŸ³ç´ åŒ¹é…
            if (input.slice(-1) === pinyin.slice(-1)) score += 6;
            if (input.slice(-2) === pinyin.slice(-2)) score += 4;

            // 5. æ•´ä½“ç›¸ä¼¼åº¦
            let commonChars = 0;
            for (let char of input) {
                if (pinyin.includes(char)) commonChars++;
            }
            score += commonChars * 2;

            // 6. é•¿åº¦ç›¸ä¼¼åº¦
            const lengthDiff = Math.abs(input.length - pinyin.length);
            if (lengthDiff <= 1) score += 3;
            else if (lengthDiff <= 2) score += 1;

            return score;
        }

        function generateSurnameSuggestions() {
            const surname = document.getElementById('surname-input').value.trim();
            if (!surname) {
                showCustomAlert('è¯·è¾“å…¥æ‚¨çš„å§“æ°ã€‚/ Please enter your surname.');
                return;
            }

            document.getElementById('loading-surname').classList.remove('hidden');
            document.getElementById('surname-suggestions').classList.add('hidden');

            // Simulate loading delay
            setTimeout(() => {
                // ä½¿ç”¨æ”¹è¿›çš„è¯­éŸ³åŒ¹é…ç®—æ³•
                const scoredSurnames = chineseSurnames.map(s => ({
                    ...s, 
                    similarity: calculatePhoneticSimilarity(surname, s.pinyin)
                }));

                // æŒ‰ç›¸ä¼¼åº¦æ’åºå¹¶åˆ†ç»„
                scoredSurnames.sort((a, b) => b.similarity - a.similarity);
                
                // é€‰æ‹©å‰6ä¸ªæœ€ä½³åŒ¹é…
                const bestMatches = scoredSurnames.slice(0, 6);

                currentSurnameOptions = bestMatches;
                usedSurnameIndices = [];
                displaySurnameSuggestions({suggestions: bestMatches});
                document.getElementById('loading-surname').classList.add('hidden');
            }, 1000);
        }

        function generateMoreSurnameSuggestions() {
            const surname = document.getElementById('surname-input').value.trim();
            if (!surname) {
                showCustomAlert('è¯·å…ˆè¾“å…¥æ‚¨çš„å§“æ°ã€‚/ Please enter your surname first.');
                return;
            }

            document.getElementById('loading-surname').classList.remove('hidden');

            setTimeout(() => {
                // è·å–è¿˜æœªä½¿ç”¨çš„å§“æ°
                const usedSurnames = currentSurnameOptions.map(s => s.chinese);
                const availableSurnames = chineseSurnames.filter(s => !usedSurnames.includes(s.chinese));
                
                // ä»å‰©ä½™çš„å§“æ°ä¸­é€‰æ‹©5ä¸ª
                const additionalSurnames = availableSurnames
                    .map(s => ({
                        ...s, 
                        similarity: calculatePhoneticSimilarity(surname, s.pinyin)
                    }))
                    .sort((a, b) => b.similarity - a.similarity)
                    .slice(0, 5);

                currentSurnameOptions = [...currentSurnameOptions, ...additionalSurnames];
                displaySurnameSuggestions({suggestions: currentSurnameOptions});
                document.getElementById('loading-surname').classList.add('hidden');
            }, 800);
        }

        function displaySurnameSuggestions(data) {
            const container = document.getElementById('surname-options');
            container.innerHTML = '';

            data.suggestions.forEach((suggestion, index) => {
                // è°ƒæ•´ç›¸ä¼¼åº¦åˆ†ç»„é˜ˆå€¼
                let badgeClass = 'similarity-low';
                let badgeText = 'Other';
                if (suggestion.similarity >= 20) {
                    badgeClass = 'similarity-high';
                    badgeText = 'High Match';
                } else if (suggestion.similarity >= 12) {
                    badgeClass = 'similarity-medium';
                    badgeText = 'Medium';
                }

                const option = document.createElement('div');
                option.className = 'bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-4 cursor-pointer hover:border-purple-500 hover:shadow-md transition-all duration-200 relative';
                option.innerHTML = `
                    <div class="similarity-badge ${badgeClass}">${badgeText}</div>
                    <div class="text-center">
                        <div class="text-3xl font-bold font-chinese mb-2">${suggestion.chinese}</div>
                        <div class="text-purple-600 font-semibold mb-1">${suggestion.pinyin}</div>
                        <div class="text-gray-600 dark:text-gray-400 text-sm">${suggestion.english}</div>
                    </div>
                `;
                
                option.addEventListener('click', () => {
                    selectedSurname = suggestion;
                    // Remove selection from other options
                    container.querySelectorAll('.border-purple-500').forEach(el => {
                        el.classList.remove('border-purple-500', 'bg-purple-50', 'dark:bg-purple-900');
                    });
                    // Add selection to clicked option
                    option.classList.add('border-purple-500', 'bg-purple-50', 'dark:bg-purple-900');
                    
                    updateStepIndicators();
                    
                    // Move to step 2 after selection
                    setTimeout(() => {
                        showStep(2);
                    }, 500);
                });
                
                container.appendChild(option);
            });

            document.getElementById('surname-suggestions').classList.remove('hidden');
        }

        function generateNameSuggestions() {
            const firstname = document.getElementById('firstname-input').value.trim();
            const gender = document.getElementById('gender-input').value;
            const meaning = document.getElementById('meaning-input').value.trim();
            
            if (!firstname) {
                showCustomAlert('è¯·è¾“å…¥æ‚¨çš„åå­—ã€‚/ Please enter your first name.');
                return;
            }

            document.getElementById('loading-name').classList.remove('hidden');
            document.getElementById('name-suggestions').classList.add('hidden');

            setTimeout(() => {
                // 1. ç”ŸæˆéŸ³éŸµåŒ¹é…åå­—
                const phoneticMatches = generatePhoneticMatches(firstname);
                
                // 2. ç”Ÿæˆæ€§åˆ«å¸¸ç”¨åå­—
                let popularPool = [];
                if (gender === 'male') {
                    popularPool = [...genderSpecificNames.male, ...genderSpecificNames.unisex];
                } else if (gender === 'female') {
                    popularPool = [...genderSpecificNames.female, ...genderSpecificNames.unisex];
                } else {
                    popularPool = [...genderSpecificNames.male, ...genderSpecificNames.female, ...genderSpecificNames.unisex];
                }

                // éšæœºé€‰æ‹©4ä¸ªå¸¸ç”¨åå­—
                const shuffled = popularPool.sort(() => 0.5 - Math.random());
                const popularMatches = shuffled.slice(0, 4);

                currentNameOptions = [...phoneticMatches, ...popularMatches];
                displayNameSuggestionsInColumns(phoneticMatches, popularMatches);
                document.getElementById('loading-name').classList.add('hidden');
            }, 1200);
        }

        function generateMoreNameSuggestions() {
            const firstname = document.getElementById('firstname-input').value.trim();
            const gender = document.getElementById('gender-input').value;
            
            if (!firstname) {
                showCustomAlert('è¯·å…ˆè¾“å…¥æ‚¨çš„åå­—ã€‚/ Please enter your first name first.');
                return;
            }

            document.getElementById('loading-name').classList.remove('hidden');

            setTimeout(() => {
                // é‡æ–°ç”Ÿæˆæ›´å¤šé€‰é¡¹
                generateNameSuggestions();
            }, 1000);
        }

        function displayNameSuggestionsInColumns(phoneticMatches, popularMatches) {
            const phoneticContainer = document.getElementById('phonetic-options');
            const popularContainer = document.getElementById('popular-options');
            
            phoneticContainer.innerHTML = '';
            popularContainer.innerHTML = '';

            // æ˜¾ç¤ºéŸ³éŸµåŒ¹é…é€‰é¡¹
            phoneticMatches.forEach((suggestion, index) => {
                const option = createNameOption(suggestion, 'phonetic-match');
                phoneticContainer.appendChild(option);
            });

            // æ˜¾ç¤ºå¸¸ç”¨åå­—é€‰é¡¹
            popularMatches.forEach((suggestion, index) => {
                const option = createNameOption(suggestion, 'popular-name');
                popularContainer.appendChild(option);
            });

            document.getElementById('name-suggestions').classList.remove('hidden');
        }

        function createNameOption(suggestion, type) {
            const option = document.createElement('div');
            option.className = 'bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-4 cursor-pointer hover:border-purple-500 hover:shadow-md transition-all duration-200 relative';
            
            const badgeClass = type === 'phonetic-match' ? 'phonetic-match' : 'popular-name';
            const badgeText = type === 'phonetic-match' ? 'ğŸµ' : 'â­';
            
            option.innerHTML = `
                <div class="similarity-badge ${badgeClass}">${badgeText}</div>
                <div class="text-center">
                    <div class="text-2xl font-bold font-chinese mb-2">${suggestion.chinese}</div>
                    <div class="text-purple-600 font-semibold mb-1 text-sm">${suggestion.pinyin}</div>
                    <div class="text-gray-600 dark:text-gray-400 text-xs mb-1">${suggestion.english}</div>
                    <div class="text-gray-500 dark:text-gray-500 text-xs">${suggestion.meaning}</div>
                </div>
            `;
            
            option.addEventListener('click', () => {
                selectedGivenName = suggestion;
                // Remove selection from all options
                document.querySelectorAll('#phonetic-options .border-purple-500, #popular-options .border-purple-500').forEach(el => {
                    el.classList.remove('border-purple-500', 'bg-purple-50', 'dark:bg-purple-900');
                });
                // Add selection to clicked option
                option.classList.add('border-purple-500', 'bg-purple-50', 'dark:bg-purple-900');
                
                updateStepIndicators();
                
                // Move to step 3 after selection
                setTimeout(() => {
                    displayFinalName();
                    showStep(3);
                }, 500);
            });
            
            return option;
        }

        function displayFinalName() {
            if (!selectedSurname || !selectedGivenName) return;

            const fullName = selectedSurname.chinese + selectedGivenName.chinese;
            
            // ä½¿ç”¨æ­£ç¡®çš„æ‹¼éŸ³åˆ†è§£
            const surnamePinyin = selectedSurname.pinyin.toLowerCase();
            const givenNameChars = Array.from(selectedGivenName.chinese);
            
            // è·å–æ­£ç¡®çš„æ‹¼éŸ³åˆ†è§£
            let givenNamePinyins = [];
            if (selectedGivenName.pinyinSplit) {
                givenNamePinyins = selectedGivenName.pinyinSplit;
            } else {
                // å¦‚æœæ²¡æœ‰é¢„å®šä¹‰çš„æ‹¼éŸ³åˆ†è§£ï¼Œè‡ªåŠ¨ç”Ÿæˆ
                givenNamePinyins = [selectedGivenName.pinyin.toLowerCase()];
            }

            // ç”Ÿæˆè¯—æ„è‹±æ–‡è§£é‡Š - æ£€æŸ¥æ˜¯å¦ä¸ºæ‰‹åŠ¨è¾“å…¥
            const isManual = selectedGivenName.isManual || false;
            const explanation = generateNameExplanation(
                selectedGivenName.chinese, 
                selectedGivenName.english, 
                selectedGivenName.meaning,
                isManual
            );

            const container = document.getElementById('final-name-display');
            container.innerHTML = `
                <div class="name-card decorative-pattern" id="name-card-export">
                    <div class="text-center mb-8">
                        <h3 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2">
                            æˆ‘çš„ä¸­æ–‡å My Chinese Name
                        </h3>
                    </div>
                    
                    <div class="landscape-layout">
                        <div class="rice-section">
                            <div class="flex justify-center items-center mb-4">
                                <div class="mx-2">
                                    <div class="individual-pinyin">${surnamePinyin}</div>
                                    <div class="rice-grid">
                                        <div class="diagonal1"></div>
                                        <div class="diagonal2"></div>
                                        <div class="character">${selectedSurname.chinese}</div>
                                    </div>
                                </div>
                                ${givenNameChars.map((char, index) => `
                                    <div class="mx-2">
                                        <div class="individual-pinyin">${givenNamePinyins[index] || givenNamePinyins[0]}</div>
                                        <div class="rice-grid">
                                            <div class="diagonal1"></div>
                                            <div class="diagonal2"></div>
                                            <div class="character">${char}</div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="text-center text-gray-600 dark:text-gray-400 text-sm">
                                ç»ƒä¹ ä¹¦å†™æ‚¨çš„ä¸­æ–‡åå­—<br>Practice writing your Chinese name
                            </div>
                        </div>
                        
                        <div class="meaning-section">
                            <div class="handwriting-quote">
                                ${explanation.combined || explanation.poetic + '. In the tapestry of Chinese culture, it represents the timeless values of harmony, wisdom, and virtue. ' + explanation.blessing + '.'}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function resetApp() {
            selectedSurname = null;
            selectedGivenName = null;
            currentSurnameOptions = [];
            currentNameOptions = [];
            usedSurnameIndices = [];
            usedNameIndices = [];
            document.getElementById('surname-input').value = '';
            document.getElementById('firstname-input').value = '';
            document.getElementById('gender-input').value = '';
            document.getElementById('meaning-input').value = '';
            document.getElementById('surname-suggestions').classList.add('hidden');
            document.getElementById('name-suggestions').classList.add('hidden');
            showStep(1);
        }

        function showManualInput() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full mx-4">
                    <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4">æ‰‹åŠ¨è¾“å…¥ä¸­æ–‡åå­— / Manual Input Chinese Name</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                ä¸­æ–‡åå­— / Chinese Name
                            </label>
                            <input type="text" 
                                   id="manual-chinese" 
                                   class="w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                                   placeholder="ä¾‹å¦‚: å¿—å¼º"
                                   autocomplete="off">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                æ‹¼éŸ³ / Pinyin
                            </label>
                            <input type="text" 
                                   id="manual-pinyin" 
                                   class="w-full px-3 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                                   placeholder="ä¾‹å¦‚: zhÃ¬ qiÃ¡ng (ç”¨ç©ºæ ¼åˆ†éš”æ¯ä¸ªå­—)"
                                   autocomplete="off">
                        </div>
                        <p class="text-sm text-gray-500 dark:text-gray-400">
                            è¯·è¾“å…¥ä¸­æ–‡åå­—å’Œå¯¹åº”çš„æ‹¼éŸ³ï¼Œæ‹¼éŸ³è¯·ç”¨ç©ºæ ¼åˆ†éš”æ¯ä¸ªå­—ã€‚<br>
                            Please enter the Chinese name and corresponding pinyin, separated by spaces.
                        </p>
                    </div>
                    <div class="flex justify-end space-x-3 mt-6">
                        <button class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded" onclick="this.closest('.fixed').remove()">å–æ¶ˆ / Cancel</button>
                        <button class="px-4 py-2 bg-purple-500 text-white hover:bg-purple-600 rounded" onclick="processManualInput()">ç¡®è®¤ / Confirm</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function processManualInput() {
            const chinese = document.getElementById('manual-chinese').value.trim();
            const pinyin = document.getElementById('manual-pinyin').value.trim();

            if (!chinese) {
                showCustomAlert('è¯·è¾“å…¥ä¸­æ–‡åå­—ã€‚/ Please enter Chinese name.');
                return;
            }

            if (!pinyin) {
                showCustomAlert('è¯·è¾“å…¥æ‹¼éŸ³ã€‚/ Please enter pinyin.');
                return;
            }

            // éªŒè¯æ±‰å­—å’Œæ‹¼éŸ³æ•°é‡æ˜¯å¦åŒ¹é…
            const chineseChars = Array.from(chinese);
            const pinyinArray = pinyin.split(/\s+/).filter(p => p.length > 0);

            if (chineseChars.length !== pinyinArray.length) {
                showCustomAlert(`æ±‰å­—æ•°é‡ (${chineseChars.length}) ä¸æ‹¼éŸ³æ•°é‡ (${pinyinArray.length}) ä¸åŒ¹é…ï¼Œè¯·æ£€æŸ¥ã€‚/ Number of Chinese characters (${chineseChars.length}) does not match number of pinyin syllables (${pinyinArray.length}), please check.`);
                return;
            }

            selectedGivenName = {
                chinese: chinese,
                pinyin: pinyin,
                pinyinSplit: pinyinArray,
                english: "Meaningful name",
                meaning: "auspicious and meaningful",
                isManual: true
            };

            // Close modal
            const modal = document.querySelector('.fixed');
            if (modal) modal.remove();

            updateStepIndicators();

            // Move to step 3
            setTimeout(() => {
                displayFinalName();
                showStep(3);
            }, 300);
        }

        function downloadNameAsText() {
            if (!selectedSurname || !selectedGivenName) {
                showCustomAlert('è¯·å…ˆç”Ÿæˆä¸­æ–‡åå­—ã€‚/ Please generate Chinese name first.');
                return;
            }
            
            const fullName = selectedSurname.chinese + selectedGivenName.chinese;
            const surnamePinyin = selectedSurname.pinyin;
            
            let givenNamePinyin;
            if (selectedGivenName.pinyinSplit) {
                givenNamePinyin = selectedGivenName.pinyinSplit.join(' ');
            } else {
                givenNamePinyin = selectedGivenName.pinyin;
            }
            
            const fullPinyin = surnamePinyin + ' ' + givenNamePinyin;
            const isManual = selectedGivenName.isManual || false;
            const explanation = generateNameExplanation(
                selectedGivenName.chinese, 
                selectedGivenName.english, 
                selectedGivenName.meaning,
                isManual
            );
            
            const content = `æˆ‘çš„ä¸­æ–‡åå­— / My Chinese Name

ä¸­æ–‡å…¨å / Full Chinese Name: ${fullName}
å§“æ° / Surname: ${selectedSurname.chinese} (${selectedSurname.pinyin})
åå­— / Given Name: ${selectedGivenName.chinese} (${givenNamePinyin})

æ‹¼éŸ³ / Pinyin: ${fullPinyin}

åå­—å«ä¹‰è§£é‡Š / Name Meaning:
${explanation.combined || (explanation.poetic + '. In the tapestry of Chinese culture, it represents the timeless values of harmony, wisdom, and virtue. ' + explanation.blessing + '.')}

Generated by ä¸­æ–‡åå­—å·¥åŠ Chinese NameCraft
ç”Ÿæˆæ—¶é—´ / Generated: ${new Date().toLocaleString()}`;
            
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `chinese-name-${fullName}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function showCustomAlert(message) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-sm w-full mx-auto">
                    <p class="text-gray-700 dark:text-gray-300 mb-4">${message}</p>
                    <div class="flex justify-end">
                        <button class="px-4 py-2 bg-purple-500 text-white hover:bg-purple-600 rounded" onclick="this.closest('.fixed').remove()">ç¡®å®š / OK</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Initialize
        updateStepIndicators();
    </script>


</body></html>